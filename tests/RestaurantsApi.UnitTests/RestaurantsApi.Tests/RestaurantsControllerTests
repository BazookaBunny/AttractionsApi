namespace RestaurantsApi.Tests;

public class RestaurantsControllerTests
{
    [Fact]
    public void GetAllRestaurants_ShouldReturnOk_WithList()
    {
        var mockService = new Mock<IRestaurantService>();
        mockService.Setup(service => service.GetAllRestaurantsAsync())
            .ReturnsAsync(new List<Restaurant>
            {
                new Restaurant { Id = 1, Name = "Testaurant", Category = "Test" }
            });

        var controller = new RestaurantsController(mockService.Object);

        //test
        var result = controller.GetAllRestaurants();
        //assert
        var okResult = result.Should().BeOfType<OkObjectResult>().Subject;
        var restaurants = okResult.Value.Should().BeAssignableTo<IEnumerable<Restaurant>>().Subject;

        restaurants.Should().HaveCount(1);
        restaurants.First().Name.Should().Be("Testaurant");
    }
}